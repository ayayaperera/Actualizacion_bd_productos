DROP DATABASE IF EXISTS BD_TIENDA_PRODUCTOS;
CREATE DATABASE BD_TIENDA_PRODUCTOS;
USE BD_TIENDA_PRODUCTOS;
CREATE TABLE CARRITOS(
COD_CAR INT NOT NULL AUTO_INCREMENT,
Tamanyo VARCHAR(25),
Material VARCHAR(50),
Color VARCHAR(25),
PRIMARY KEY(COD_CAR)
);

INSERT INTO CARRITOS VALUES(01, 'pequeño', 'plastico', 'azul');
INSERT INTO CARRITOS VALUES(02, 'pequeño', 'plastico', 'azul');
INSERT INTO CARRITOS VALUES(03, 'mediano', 'metal', 'verde');
INSERT INTO CARRITOS VALUES(04, 'mediano', 'metal', 'verde');
INSERT INTO CARRITOS VALUES(05, 'grande', 'aluminio', 'rojo');

CREATE TABLE SECCIONES(
COD_SEC INT NOT NULL AUTO_INCREMENT,
Nombre VARCHAR(25),
Num_Estant INT,
Mostrador BOOLEAN,
PRIMARY KEY(COD_SEC)
);

INSERT INTO SECCIONES VALUES(1, 'alimentos', 20, true);
INSERT INTO SECCIONES VALUES(2,'ropa', 24, false);
INSERT INTO SECCIONES VALUES(3,'juguetes', 19, true);
INSERT INTO SECCIONES VALUES(4,'souvenir', 3, false);
INSERT INTO SECCIONES VALUES(5,'deporte', 27, true);

CREATE TABLE CAJEROS(
COD_CAJ INT NOT NULL AUTO_INCREMENT,
DNI VARCHAR(9) NOT NULL UNIQUE,
Nombre VARCHAR(25),
TLF VARCHAR(9),
Horas_Trabajo TIME,
PRIMARY KEY(COD_CAJ)
);

INSERT INTO CAJEROS VALUES(1, '12345678A', 'Julia', '612345678', 6);
INSERT INTO CAJEROS VALUES(2, '23456789B', 'Pepe', '623456789', 7);
INSERT INTO CAJEROS VALUES(3, '34567890C', 'Marta', '634567890', 6);
INSERT INTO CAJEROS VALUES(4, '45678901D', 'Carlos', '645678901', 7);
INSERT INTO CAJEROS VALUES(5, '56789012F', 'Paula', '656789012', 6);

CREATE TABLE REPONEDORES(
COD_REP INT NOT NULL AUTO_INCREMENT,
DNI VARCHAR(9) NOT NULL UNIQUE,
Nombre VARCHAR(25),
TLF VARCHAR(9),
Horas_Trabajo TIME,
PRIMARY KEY(COD_REP)
);

INSERT INTO REPONEDORES VALUES(1, '43376827A', 'Maria', '663303445', 8);
INSERT INTO REPONEDORES VALUES(2, '77896443T', 'Luis', '334221342', 8);
INSERT INTO REPONEDORES VALUES(3, '11224523V', 'Miguel', '55653245', 8);
INSERT INTO REPONEDORES VALUES(4, '77875356X', 'Ismael', '443235623', 8);
INSERT INTO REPONEDORES VALUES(5, '34521783Y', 'Angela', '333225742', 8);

CREATE TABLE ALMACENES(
COD_ALMA INT NOT NULL AUTO_INCREMENT,
PIN_Segur VARCHAR(32),
Num_Estant INT,
Num_Montacargas INT,
PRIMARY KEY(COD_ALMA)
);

INSERT INTO ALMACENES VALUES(1, 'A1B2C3D4E5', 20, 5);
INSERT INTO ALMACENES VALUES(2, 'F6G7H8I9J0', 40, 10);
INSERT INTO ALMACENES VALUES(3, 'K10L11M12N', 60, 15);
INSERT INTO ALMACENES VALUES(4, 'N13O14P15Q', 80, 20);
INSERT INTO ALMACENES VALUES(5, 'Q16R17S18T', 100, 25);

CREATE TABLE PROVEEDORES(
COD_PROV INT NOT NULL AUTO_INCREMENT,
DNI VARCHAR(9) NOT NULL UNIQUE,
Nombre VARCHAR(25),
TLF VARCHAR(9),
Empresa_Distribuidora VARCHAR(25),
PRIMARY KEY(COD_PROV)
);

INSERT INTO PROVEEDORES VALUES(1, '44322453Q', 'Mario', 88764911, 'Miguel_S.A');
INSERT INTO PROVEEDORES VALUES(2, '77885433R', 'Angel', 754245673, 'Leroy_Merlin');
INSERT INTO PROVEEDORES VALUES(3, '90927261D', 'Kiara', 55678942, 'IKEA');
INSERT INTO PROVEEDORES VALUES(4, '82626382T', 'Octavio', 998652017, 'Worten');
INSERT INTO PROVEEDORES VALUES(5, '39293748L', 'Juan', 556731428, 'MediaMarkt');

CREATE TABLE CLIENTES(
COD_CLI INT NOT NULL AUTO_INCREMENT,
COD_CAR INT NOT NULL,
COD_CAJ INT NOT NULL,
DNI VARCHAR(9) NOT NULL UNIQUE,
Nombre VARCHAR(25),
Apellido VARCHAR(25),
TLF VARCHAR(9),
Direccion VARCHAR(25),
Email VARCHAR(50),
Tarj_Socio BOOLEAN,
PRIMARY KEY(COD_CLI)
);

INSERT INTO CLIENTES VALUES(1, 1, 1, '12345678A', 'Ana', 'Ojeda', 667890123, 'Calle_Las_Torres', 'anaojeda_hotmail.com', true);
INSERT INTO CLIENTES VALUES(2, 2, 2, '90123456B', 'Paco', 'Galvan', 678901234, 'Avenida_de_Barcelona', 'pacogalvan_outlook.com', false);
INSERT INTO CLIENTES VALUES(3, 3, 3, '78901234C', 'Nuria', 'Perez', 689012345, 'Calle_Los_Girasoles', 'nuriaperez_gmail.com', true);
INSERT INTO CLIENTES VALUES(4, 4, 4, '56789012D', 'Lucas', 'Martin', 690123456, 'Avenida_de_Madrid', 'lucasmartin_hotmail.com', false);
INSERT INTO CLIENTES VALUES(5, 5, 5, '34567890F', 'Carmen', 'Quintana', 601234567, 'Calle_del_Pinar', 'carmenquintana_outlook.com', true);

CREATE TABLE PRODUCTOS(
COD_PROD INT NOT NULL AUTO_INCREMENT,
COD_SEC INT NOT NULL,
COD_PROV INT NOT NULL,
Nombre VARCHAR(25),
Precio DECIMAL(5,2),
Marca VARCHAR(15),
Embalaje VARCHAR(25),
PRIMARY KEY(COD_PROD)
);

INSERT INTO PRODUCTOS VALUES(1,1,1, 'Caja', 20.00,'Lidl','Carton');
INSERT INTO PRODUCTOS VALUES(2,2,2, 'Fruta', 10.00,'Mercadona','Madera');
INSERT INTO PRODUCTOS VALUES(3,3,3, 'Zapatillas', 50.00,'Adidas','Carton');
INSERT INTO PRODUCTOS VALUES(4,4,4, 'Deshodorante', 7.00,'Axe','Plastico');
INSERT INTO PRODUCTOS VALUES(5,5,5, 'Television', 300.00,'Samsung','Carton');

CREATE TABLE TIPO(
COD_PROD INT NOT NULL AUTO_INCREMENT,
Tipo_Producto VARCHAR(25) NOT NULL,
PRIMARY KEY(COD_PROD)
);

INSERT INTO TIPO VALUES(1, 'Alimentación');
INSERT INTO TIPO VALUES(2, 'Higiene_personal');
INSERT INTO TIPO VALUES(3, 'Ropa_y_calzados');
INSERT INTO TIPO VALUES(4, 'Limpieza_del_hogar');
INSERT INTO TIPO VALUES(5, 'Electrodomésticos');

CREATE TABLE COMPRAN(
COD_CLI INT NOT NULL,
COD_PROD INT NOT NULL,
PRIMARY KEY(COD_CLI,COD_PROD)
);

INSERT INTO COMPRAN VALUES(1,1);
INSERT INTO COMPRAN VALUES(2,2);
INSERT INTO COMPRAN VALUES(3,3);
INSERT INTO COMPRAN VALUES(4,4);
INSERT INTO COMPRAN VALUES(5,5);

CREATE TABLE GUARDAN(
COD_ALMA INT NOT NULL,
COD_PROD INT NOT NULL,
PRIMARY KEY(COD_ALMA,COD_PROD)
);

INSERT INTO GUARDAN VALUES(1,1);
INSERT INTO GUARDAN VALUES(2,2);
INSERT INTO GUARDAN VALUES(3,3);
INSERT INTO GUARDAN VALUES(4,4);
INSERT INTO GUARDAN VALUES(5,5);

CREATE TABLE COLOCAN(
COD_REP INT NOT NULL,
COD_PROD INT NOT NULL,
PRIMARY KEY(COD_REP,COD_PROD)
);

INSERT INTO COLOCAN VALUES(1,1);
INSERT INTO COLOCAN VALUES(2,2);
INSERT INTO COLOCAN VALUES(3,3);
INSERT INTO COLOCAN VALUES(4,4);
INSERT INTO COLOCAN VALUES(5,5);

ALTER TABLE CLIENTES
ADD CONSTRAINT fk1 FOREIGN KEY(COD_CAR) REFERENCES CARRITOS(COD_CAR)
ON UPDATE CASCADE,
ADD CONSTRAINT fk2 FOREIGN KEY(COD_CAJ) REFERENCES CAJEROS(COD_CAJ)
ON UPDATE CASCADE;

ALTER TABLE PRODUCTOS
ADD CONSTRAINT fk3 FOREIGN KEY(COD_SEC) REFERENCES SECCIONES(COD_SEC)
ON UPDATE CASCADE,
ADD CONSTRAINT fk4 FOREIGN KEY(COD_PROV) REFERENCES PROVEEDORES(COD_PROV)
ON UPDATE CASCADE;

ALTER TABLE TIPO
ADD CONSTRAINT fk5 FOREIGN KEY(COD_PROD) REFERENCES PRODUCTOS(COD_PROD)
ON UPDATE CASCADE;

ALTER TABLE COMPRAN
ADD CONSTRAINT fk6 FOREIGN KEY(COD_CLI) REFERENCES CLIENTES(COD_CLI)
ON UPDATE CASCADE,
ADD CONSTRAINT fk7 FOREIGN KEY(COD_PROD) REFERENCES PRODUCTOS(COD_PROD)
ON UPDATE CASCADE;

ALTER TABLE GUARDAN
ADD CONSTRAINT fk8 FOREIGN KEY(COD_ALMA) REFERENCES ALMACENES(COD_ALMA)
ON UPDATE CASCADE,
ADD CONSTRAINT fk9 FOREIGN KEY(COD_PROD) REFERENCES PRODUCTOS(COD_PROD)
ON UPDATE CASCADE;

ALTER TABLE COLOCAN
ADD CONSTRAINT fk10 FOREIGN KEY(COD_REP) REFERENCES REPONEDORES(COD_REP)
ON UPDATE CASCADE,
ADD CONSTRAINT fk11 FOREIGN KEY(COD_PROD) REFERENCES PRODUCTOS(COD_PROD)
ON UPDATE CASCADE;
